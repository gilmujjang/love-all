import { DataEnum, OriginData, RangeEnum } from "../../types";
import { countData, countPlayTimeData } from "../../utils/api";
import { getRangeDisplayName } from "../../utils/utils";

interface Props {
  data: OriginData[];
  rainyData: OriginData[];
  range: RangeEnum;
  name: string;
}

const PlayerInfoCard = ({ data, rainyData, range, name }: Props) => {
  const playNum = countData(data, DataEnum.ì´ë¦„)[name];
  const playTimeData = countPlayTimeData(data, DataEnum.ì´ë¦„);
  const playTime = playTimeData[name];
  const haveRelation = Object.keys(playTimeData).length;
  const rainyNum = countData(rainyData, DataEnum.ì´ë¦„)[name];

  const Content = ({ title, text }: { title: string; text: string }) => {
    return (
      <div style={{ display: "flex", marginTop: 12 }}>
        <div>{title}</div>
        <div style={{ marginLeft: 8, fontWeight: 600 }}>{text}</div>
      </div>
    );
  };

  const customRangeDisplayName = (range: RangeEnum) => {
    if (range === RangeEnum.ì „ì²´) return "ëª¨ë“  ì‹œê°„";
    else return getRangeDisplayName(range);
  };

  return (
    <div
      style={{
        width: "100%",
        height: "100%",
      }}
    >
      <div style={{ whiteSpace: "nowrap", fontWeight: "bold", fontSize: 18 }}>
        ëŸ¬ë¸Œì˜¬ê³¼ í•¨ê»˜í•œ {customRangeDisplayName(range)}ðŸ‘‘
      </div>
      <div style={{ marginTop: 48, color: "black" }}>
        <Content title="í•¨ê»˜í•œ íšŸìˆ˜" text={`${playNum}íšŒ`} />
        <Content title="í•¨ê»˜í•œ ì‹œê°„" text={`${playTime}ì‹œê°„`} />
        <Content title="í•¨ê»˜í•œ ì¸ì—°" text={`${haveRelation}ëª…`} />
        <Content title="ìš°ì²œì·¨ì†Œ" text={`${rainyNum}ë²ˆ`} />
      </div>
    </div>
  );
};

export default PlayerInfoCard;
